<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <!--[if lt IE 9]>
    <script type="text/javascript"  th:src="@{/static/lib/html5shiv.js}"></script>
    <script type="text/javascript" src="lib/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" th:href="@{/h-ui/css/H-ui.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/h-ui.admin/css/H-ui.admin.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/lib/Hui-iconfont/1.0.8/iconfont.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/h-ui.admin/skin/default/skin.css}" id="skin" />
    <link rel="stylesheet" type="text/css" th:href="@{/h-ui.admin/css/style.css}" />
    <!--[if IE 6]>
    <script type="text/javascript" th:src="@{/lib/DD_belatedPNG_0.0.8a-min.js}" ></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <title>结果展示</title>
    <script type="text/javascript" th:inline="javascript">
        function resultshow()
        {
            document.getElementById("showData").innerText ="1\n2\n3";
            $("#modal-demo").modal("show");
        }

    </script>
</head>
<body>
<!--<input type="hidden" th:value="${businessid}" id="businessid"/>-->
<nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 验证模型 <span class="c-gray en">&gt;</span> 模型验证 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont">&#xe68f;</i></a></nav>
<div class="page-container " style="position: absolute;width: 97%;height: 90%;border: 0px solid red">
    <div class="row" >
        <div class="col-md-5 col-lg-5 col-sm-5" style="height: 92vh;color: grey;font-size: 24px;text-align: center;line-height: 5vh;border: 0px solid red;">
            <div class="panel panel-default">
                <div class="panel-header">数据导入</div>
                <div class="panel-body" style="height:70vh; font-size: 10px">
                    <div style="height: 22vh;width: 12%;"></div>
                    <div>设备ID&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" readonly="readonly" placeholder="xd123553325" class="input-text radius size-M" style="width: 70%"></div>
                    <div>线路ID&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" readonly="readonly" placeholder="xd1532153121" class="input-text radius size-M" style="width: 70%"></div>
                    <div>时间范围&nbsp;&nbsp;&nbsp;<input type="text" readonly='readonly' placeholder="2019-10-16 17:40:02 - 2019-11-27 22:03:04" class="input-text radius size-M" style="width: 70%"></div>
                </div>
            </div>
        </div>
        <div class="col-md-1 col-lg-1 col-sm-1" style="height: 92vh;color: grey;font-size: 24px;text-align: center;line-height: 5vh; border: 0px solid red;">
            <div style="width: 10%;height: 37vh;"></div>
            <img src="/home/images/jian.png" style="border: 0px solid red">
        </div>
        <div class="col-md-5 col-lg-5 col-sm-5" style="height: 92vh;color: grey;font-size: 24px;text-align: center;line-height: 5vh; border: 0px solid red;">
            <div class="panel panel-default">
                <div class="panel-header">模型配置</div>
                <div class="panel-body" style="height:70vh; ">
                    <img th:src="@{/image/xscf.png}" style="border: 0px solid red;margin-top: 30%"/>
                </div>
            </div>
        </div>
        <div class="col-md-1 col-lg-1 col-sm-1" style="height: 92vh;color: grey;font-size: 24px;text-align: center;line-height: 5vh; border: 0px solid red;">
            <div style="border: 0px solid blue;height: 82vh;width: 10%;"></div>
            <input class="btn btn-success radius" type="button" value="运行" onclick="resultshow()">
        </div>
</div>
    <div id="modal-demo" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <!-- 弹出对话框 -->
        <div class="modal-dialog">
            <div class="modal-content radius">
                <div class="modal-header">
                    <h3 class="modal-title">返回的结果</h3>
                    <a class="close" data-dismiss="modal" aria-hidden="true">×</a>
                </div>
                <div class="modal-body">
                <pre id="showData">

                </pre>
                </div>
                <div class="modal-footer">
                    <!--<button class="btn btn-primary" data-dismiss="modal" onclick="save();">确定</button>-->
                    <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
                </div>
            </div>
        </div>
</div>
</div>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" th:src="@{/lib/jquery/1.9.1/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{/lib/layer/2.4/layer.js}"></script>
<script type="text/javascript" th:src="@{/h-ui/js/H-ui.min.js}"></script>
<script type="text/javascript" th:src="@{/h-ui.admin/js/H-ui.admin.js}"></script>

<script>
    var status = "xxx";
    function selectblock(){
        // document.getElementById('sceneObject').setAttribute('type',"button");
        // var sceneid = $("#selectScene").val();
        //alert(blockid);
        // 	$.ajax({
        // 		url : "/selectObjectNode",
        // 		type:"post",
        // 		data : {
        // 			"sceneid" : encodeURI(sceneid),
        // 			async : false
        // 		},
        // 		success : function(data) {
        // 				 $("#sceneObject").val(data);
        //
        //
        // 		}
        // 	});
        selectNodes();
        selectObject()
    }

    function selectNodes(){

        var sceneid = $("#selectScene").val();
        $("#questionprocesss :first-child").remove();
        var questionprocess = '<iframe  name="questionprocess" src="/business/selectNodes/' +
            '' +sceneid+
            '" frameborder="0" scrolling="auto" style="height: 100%;width: 100%;"></iframe>';
        $("#questionprocesss").append(questionprocess);

    }

    function selectObject() {
        var sceneid = $("#selectScene").val();
        $("#sceneinformation :first-child").remove();
        var sceneinformation = '<iframe  name="sceneinformation" src="/business/sceneinformation/' +
            '' +sceneid+
            '" frameborder="0" scrolling="auto" style="height: 100%;width: 100%;"></iframe>';
        $("#sceneinformation").append(sceneinformation);
    }

    function nextstep() {
        var blockid = window.frames["questionprocess"].document.getElementById('blockid').value;
        status=blockid;
        if(status=="xxx"||status==undefined||status==null){
            $.Huimodalalert('请先提取节点',2000);
        }
        else {
            var businessid =document.getElementById('businessid').getAttribute('value');
            var sceneid = $("#selectScene").val();
            var id= {
                "blockid" : blockid,
                "businessid" : businessid,
                "sceneid":sceneid
            };
            $.ajax({
                url : "/business/savequestion",
                type : "POST",
                async : true,
                contentType: "application/json; charset=utf-8",
                data : JSON.stringify(id),
                dataType : 'json',
                success : function(data) {
                    if(data.code==1){
                        var href = "/business/questionDefine/"+blockid.toString();
                        document.getElementById('nextstep').setAttribute("href",href);
                        $.Huimodalalert('节点提取成功',2000);
                    }
                    else {
                        $.Huimodalalert('节点已提取，请重新提取节点或删除已提取的节点',2000);
                        status="xxx"
                    }
                }
            });

        }
    }

    function showstatus() {
        if(status=="xxx"||status==undefined||status==null){
            $.Huimodalalert('请先保存提取的节点',2000);
        }
        else{
            var href = "/business/questionDefine/"+status.toString();
            location.href = href;
        }

    }
</script>



</body>
</html>